/* eslint-disable */
const { check, body, checkSchema, oneOf, validationResult } = require('./check');
const { matchedData } = require('./filter');
const express = require('express');
const bodyParser = require('body-parser');

const app = express();
app.use(bodyParser.json());
app.use(bodyParser.text());

app.all('/*', [check.body(['foo.*', '*.*.qux'])], (req, res) => {
  console.log(req.body);
  const data = matchedData(req);
  const result = validationResult(req);
  res.json({
    data,
    errors: result.array(),
  });
});

app.listen(3001);
